<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1000/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">

<head th:replace="common/header :: common-header"></head>

<body>
<div class="page-top" style="width: 100%; height: 1px; background-color: lightgreen">
</div>
<!-- Static navbar -->
<nav class="navbar navbar-default navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span
                    class="icon-bar"></span> <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Alpine Bookstore</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-left">
                <li><a href="#">Home</a></li>
                <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                        aria-haspopup="true" aria-expanded="false">Books <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a th:href="@{/bookshelf}">Browse the Bookshelf</a></li>
                        <li><a href="#">Store Hours &#38; Location</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li role="separator" class="divider"></li>
                        <li class="dropdown-header">Featured</li>
                        <li><a href="#">Best Sellers</a></li>
                        <li><a href="#">New Offers</a></li>
                    </ul>

                </li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <form class="navbar-form">
                    <div class="form-group">
                        <input type="text" name="keyword" class="form-control" placeholder="Book Title" />
                    </div>
                    <button type="submit" class="btn btn-default">Search</button>
                </form>
                <li><a href="common">Shopping Cart <span class="sr-only">(current)</span></a></li>
                <li class="active"><a sec:authorize="isAnonymous()" th:href="@{/login}">My Account</a></li>
                <li class="active"><a sec:authorize="isAuthenticated()" th:href="@{/myProfile}">My Account</a></li>
                <li><a sec:authorize="isAuthenticated()" th:href="@{/logout}">Log out</a></li>
            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
    <!--/.container-fluid -->
</nav>
<div class="container">
    <div class="row" style="margin-bottom: -100px;">
        <div class="col-xs-10">
            <h2 class="section-headline"><span th:text="${#strings.toUpperCase(user.username)}">User</span></h2>
        </div>
        <div class="col-xs-2">
            <img src="/images/logo-resized.png" class="img-responsive" alt="logo" width="128" height="128"/>
        </div>
    </div>
    <hr style="position:absolute; width:100%; height:6px; background-color: #333; z-index:-1; margin-top:33px;" />
    <img class="img-responsive" src="/images/wood.jpeg" style="margin-top: 120px;" alt="wood"/>
    <div class="row" style="margin-top: 50px;">
        <div class="col-xs-8 ">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs">
                <li class="nav-item" th:classappend="${classActiveEdit}? 'active'">
                    <a class="nav-link" href="#tab-2" data-toggle="tab">
                        <span class="text-danger">Edit</span>
                    </a>
                </li>

                <li class="nav-item" th:classappend="${classActiveOrders}? 'active'">
                    <a class="nav-link" href="#tab-1" data-toggle="tab">
                        <span class="text-danger">Orders</span>
                    </a>
                </li>

                <li class="nav-item" th:classappend="${classActiveBilling}? 'active'">
                    <a class="nav-link" href="#tab-3" data-toggle="tab">
                        <span class="text-danger">Billing</span>
                    </a>
                </li>
                <li class="nav-item" th:classappend="${classActiveShipping}? 'active'">
                    <a class="nav-link" href="#tab-4" data-toggle="tab">
                        <span class="text-danger">Shipping</span>
                    </a>
                </li>
            </ul>

            <!-- Tab panels-->
            <div class="tab-content">
                <!-- Edit User Information -->
                <div class="tab-pane fade" id="tab-2" th:classappend="${classActiveEdit}? 'in active'">
                    <div class="panel panel-default">
                        <div class="panel-body" style="background-color: #f5f5f5; padding: 20px;">
                            <form th:action="@{/updateUserInfo}" method="post">
                                <input type="hidden" name="id" th:value="${user.id}" />

                                <div class="bg-info" th:if="${updateUserInfo}">User info updated.</div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-xs-6">
                                            <label for="firstName">First Name</label>
                                            <input type="text" class="form-control" id="firstName" name="firstName" th:value="${user.firstName}" />
                                        </div>
                                        <div class="col-xs-6">
                                            <label for="lastName">Last Name</label>
                                            <input type="text" class="form-control" id="lastName" name="lastName" th:value="${user.lastName}" />
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="userName">Username</label>
                                    <input type="text" class="form-control" id="userName" name="username" th:value="${user.username}" />
                                </div>

                                <div class="form-group">
                                    <label for="currentPassword">Current Password</label>
                                    <input type="text" class="form-control" id="currentPassword" name="currentPassword" th:value="${currentPassword}" />
                                </div>
                                <p style="color:#828282">Enter your current password to change the email address or password.</p>

                                <div class="form-group">
                                    <label for="email">* Email Address</label>
                                    <input type="text" class="form-control" id="email" name="email" th:value="${user.email}" />
                                </div>

                                <div class="form-group">
                                    <label for="txtNewPassword">New Password</label>
                                    <input type="password" class="form-control" id="txtNewPassword" name="newPassword" />
                                </div>

                                <div class="form-group">
                                    <label for="txtConfirmPassword">Confirm New Password</label>
                                    <input type="password" class="form-control" id="txtConfirmPassword" />
                                </div>

                                <button type="submit" class="btn btn-primary">Create New Account</button>
                                <button type="reset" class="btn btn-primary">Reset</button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Order Information -->
                <div class="tab-pane fade" id="tab-1" th:classappend="${classActiveOrder}? 'in active'">
                    <div class="panel-group">
                        <div class="panel panel-default" style="border: none;">
                            <div class="panel-body" style="background-color: #ededed; margin-top: 20px;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Billing Information -->
                <div class="tab-pane fade" id="tab-3" th:classappend="${classActiveBilling}? 'in active'">
                    <div class="panel-group">
                        <div class="panel panel-default" style="border: none;">
                            <div class="panel-body" style="background-color: #ededed; margin-top: 20px;">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item active">
                                        <a th:href="@{/listOfCreditCards}" th:style="${listOfCreditCards}? 'color:red'">List of Credit Cards</a>
                                    </li>
                                    <li class="breadcrumb-item active">
                                        <a th:href="@{/addNewCreditCard}" th:style="${addNewCreditCard}? 'color:red'">Add Credit Card</a>
                                    </li>
                                </ol>

                                <div th:if="${listOfCreditCards}">
                                    <form th:action="@{/setDefaultPayment}" method="post">
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th>Default</th>
                                                <th>Credit Card</th>
                                                <th>Operations</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="userPayment : ${userPaymentList}">
                                                <td>
                                                    <input type="radio" name="defaultUserPaymentId" th:value="${userPayment.id}" th:checked="${userPayment.defaultPayment}" />
                                                </td>
                                                <td th:text="${userPayment.cardName}"></td>
                                                <td>
                                                    <a th:href="@{/updateCreditCard(id=${userPayment.id})}" class="btn btn-primary" role="button">Update</a>

                                                    <a th:href="@{/removeCreditCard(id=${userPayment.id})}" class="btn btn-danger" role="button">Delete</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <button class="btn btn-primary" type="submit">Save</button>
                                    </form>
                                </div>

                                <div th:if="${addNewCreditCard}">
                                    <form th:action="@{/addNewCreditCard}" method="post">
                                        <div class="bg-info" th:if="${updateUserPaymentInfo}">User Information Updated Successfully!</div>
                                        <input hidden="hidden" name="id" th:value="${userPayment.id}" />

                                        <div class="form-group">
                                            <h5>* Card Name </h5>
                                            <input type="text" class="form-control" id="cardName" placeholder="Card Name" th:name="cardName"
                                                   required="required" th:value="${userPayment.cardName}" />
                                        </div>

                                        <!-- Billing Address -->
                                        <hr/>
                                        <div class="form-group">
                                            <h4>Billing Address</h4>
                                        </div>
                                        <div class="form-group">
                                            <label for="billingName">* Name</label>
                                            <input type="text" class="form-control" id="billingName"
                                                   placeholder="Receiver Name" th:name="userBillingName"
                                                   required="required" th:value="${userBilling.userBillingName}" />
                                        </div>

                                        <div class="form-group">
                                            <label for="billingCountry">* Country</label>
                                            <select id="billingCountry" class="form-control" th:name="userBillingCountry" th:value="${userBilling.userBillingCountry}" required="required">
                                                <option value="" disabled="disabled" selected="selected">Select a Country</option>
                                                <option value="CA">Canada</option>
                                                <option value="US">United States</option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="billingAddress">* Street Address</label>
                                            <input type="text" class="form-control" id="billingAddress"
                                                placeholder="Street Address 1" th:name="userBillingStreet1"
                                                required="required" th:value="${userBilling.userBillingStreet1}" />

                                            <input
                                                type="text" class="form-control" id="billingAddress2"
                                                placeholder="Street Address 2" th:name="userBillingStreet2"
                                                th:value="${userBilling.userBillingStreet2}" />
                                        </div>

                                        <div class="row">
                                            <div class="col-xs-4">
                                                <div class="form-group">
                                                    <label for="billingCity">* City</label>
                                                    <input type="text" class="form-control" id="billingCity"
                                                           placeholder="Billing City" th:name="userBillingCity"
                                                           required="required" th:value="${userBilling.userBillingCity}" />
                                                </div>
                                            </div>
                                            <div class="col-xs-4">
                                                <div class="form-group">
                                                    <label for="billingStateProvince">* State/Province</label>
                                                    <select id="billingStateProvince" class="form-control"
                                                        th:name="userBillingStateProvince"
                                                        th:value="${userBilling.userBillingStateProvince}"
                                                        required="required">
                                                        <option value="" disabled="disabled" selected="selected">Select an Option</option>
                                                        <option th:each="state : ${stateList}" th:text="${state}" th:selected="(${userBilling.userBillingStateProvince}==${state})"></option>
                                                        <option th:each="province : ${provinceList}" th:text="${province}" th:selected="(${userBilling.userBillingStateProvince}==${province})"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-xs-4">
                                                <div class="form-group">
                                                    <label for="billingZipcode">* Zip/Postal Code</label>
                                                    <input
                                                        type="text" class="form-control" id="billingZipcode"
                                                        placeholder="Billing Zip/Postal Code" th:name="userBillingZipPostalCode"
                                                        required="required" th:value="${userBilling.userBillingZipPostalCode}" />
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Credit Card Information -->
                                        <hr />
                                        <div class="form-group">
                                            <h4>Credit Card Information</h4>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <img src="/images/creditcards.png" class="img-responsive" />
                                                <br />
                                                <div class="form-group">
                                                    <label for="cardType">* Select Card Type:</label>
                                                    <select class="form-control" id="cardType" th:name="type" th:value="${userPayment.type}">
                                                        <option value="" disabled="disabled" selected="selected">Select an Option</option>
                                                        <option value="visa">Visa</option>
                                                        <option value="mastercard">Mastercard</option>
                                                        <option value="discover">Discover</option>
                                                        <option value="amex">American Express</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label for="cardHolder">* Cardholder Name:</label>
                                                    <input type="text" class="form-control" id="cardHolder" required="required"
                                                           placeholder = "Cardholder Name" th:name="holderName" th:value="${userPayment.holderName}"/>
                                                </div>
                                                <div class="form-group">
                                                    <label for="cardNumber">* Card Number:</label>
                                                    <div class="input-group">
                                                        <input type="tel" class="form-control" id="cardNumber" required="required"
                                                               placeholder = "Valid Card Number" th:name="cardNumber" th:value="${userPayment.cardNumber}"/>
                                                        <span class="input-group-addon"><i class="fa fa-credit-card" aria-hidden="true"></i></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-xs-7">
                                                <div class="form-group">
                                                    <label>* Expiration Date</label>
                                                    <div class="row">
                                                        <div class="col-xs-6">
                                                            <input type="text" class="form-control" id="expiryMonth" name="expiryMonth" placeholder="MM" maxlength="2" required="required" th:value="${userPayment.expiryMonth}" pattern="[0-9]{2}" title="Please enter a two-digit number" />
                                                        </div>
                                                        <div class="col-xs-6">
                                                            <input type="text" class="form-control" id="expiryYear" name="expiryYear" placeholder="YYYY" maxlength="4" required="required" th:value="${userPayment.expiryYear}" pattern="[0-9]{4}" title="Please enter a four-digit number" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xs-5">
                                                <div class="form-group">
                                                    <label for="cardCVC">CVC Code</label>
                                                    <input id="cardCVC" type="text" class="form-control" name="cvc" maxlength="3"
                                                           placeholder="CVC" th:name="cvc" th:value="${userPayment.cvc}" pattern="[0-9]{3}" title="Please enter a three-digit number" />
                                                </div>
                                            </div>
                                        </div>
                                        <hr/>
                                        <button type="submit" class="btn btn-primary btn-lg">Save All</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Shipping Information -->
                <div class="tab-pane fade" id="tab-4"
                     th:classappend="${classActiveShipping}? 'in active'">
                    <div class="panel-group">
                        <div class="panel panel-default" style="border: none;">
                            <div class="panel-body" style="background-color: #ededed; margin-top: 20px;">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item active">
                                        <a th:href="@{/listOfShippingAddresses}" th:style="${listOfShippingAddresses}? 'color:red'">List of Shipping Addresses</a>
                                    </li>
                                    <li class="breadcrumb-item active">
                                        <a th:href="@{/addNewShippingAddress}" th:style="${addNewShippingAddress}? 'color:red'">Add Shipping Address</a>
                                    </li>
                                </ol>

                                <div th:if="${listOfShippingAddresses}">
                                    <form th:action="@{/setDefaultShippingAddress}" method="post">
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th>Default</th>
                                                <th>Shipping Address</th>
                                                <th>Operations</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="userShipping : ${userShippingList}">
                                                <td><input type="radio" name="defaultShippingAddressId"
                                                           th:value="${userShipping.id}"
                                                           th:checked="${userShipping.userShippingDefault}" /></td>
                                                <td th:text="${userShipping.userShippingStreet1 +
                                                              (userShipping.userShippingStreet2 != null and userShipping.userShippingStreet2 != '' ? ', ' + userShipping.userShippingStreet2 : '') +
                                                              ', ' + userShipping.userShippingCity + ', ' +
                                                              userShipping.userShippingStateProvince + ', ' +
                                                              userShipping.userShippingZipPostalCode + ', ' +
                                                              userShipping.userShippingCountry}">
                                                </td>
                                                <td>
                                                    <a th:href="@{/updateUserShipping(id=${userShipping.id})}" class="btn btn-primary" role="button">Update</a>
                                                    <a th:href="@{/removeUserShipping(id=${userShipping.id})}" class="btn btn-danger" role="button">Delete</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <button class="btn btn-primary" type="submit">Save</button>
                                    </form>
                                </div>

                                <div th:if="${addNewShippingAddress}">
                                    <form th:action="@{/addNewShippingAddress}" method="post">
                                        <div class="bg-info" th:if="${updateUserShippingInfo}">User Shipping Information Updated Successfully!</div>
                                        <input hidden="hidden" name="id" th:value="${userShipping.id}" />

                                        <!-- Shipping Address -->
                                        <hr />
                                        <div class="form-group">
                                            <h4>Shipping Address</h4>
                                        </div>
                                        <div class="form-group">
                                            <label for="shippingName">* Name</label>
                                            <input type="text" class="form-control" id="shippingName"
                                                   placeholder="Receiver Name" th:name="userShippingName"
                                                   required="required" th:value="${userShipping.userShippingName}" />
                                        </div>

                                        <div class="form-group">
                                            <label for="shippingCountry">* Country</label>
                                            <select id="shippingCountry" class="form-control" th:name="userShippingCountry" th:value="${userShipping.userShippingCountry}" required="required">
                                                <option value="" disabled="disabled" selected="selected">Select a Country</option>
                                                <option value="CA">Canada</option>
                                                <option value="US">United States</option>
                                            </select>
                                        </div>


                                        <div class="form-group">
                                            <label for="shippingAddress">* Street Address</label>
                                            <input type="text" class="form-control" id="shippingAddress"
                                                placeholder="Street Address 1" th:name="userShippingStreet1"
                                                required="required"
                                                th:value="${userShipping.userShippingStreet1}" />
                                            <input
                                                type="text" class="form-control"
                                                placeholder="Street Address 2" th:name="userShippingStreet2"
                                                th:value="${userShipping.userShippingStreet2}" />
                                        </div>

                                        <div class="row">
                                            <div class="col-xs-4">
                                                <div class="form-group">
                                                    <label for="shippingCity">* City</label>
                                                    <input type="text" class="form-control" id="shippingCity"
                                                           placeholder="Shipping City" th:name="userShippingCity"
                                                           required="required" th:value="${userShipping.userShippingCity}" />
                                                </div>
                                            </div>
                                            <div class="col-xs-4">
                                                <div class="form-group">
                                                    <label for="shippingStateProvince">* State/Province</label>
                                                    <select id="shippingStateProvince" class="form-control"
                                                        th:name="userShippingStateProvince"
                                                        th:value="${userShipping.userShippingStateProvince}"
                                                        required="required">
                                                        <option value="" disabled="disabled">Select an Option</option>
                                                        <option th:each="state : ${stateList}" th:text="${state}" th:selected="(${userShipping.userShippingStateProvince}==${state})"></option>
                                                        <option th:each="province : ${provinceList}" th:text="${province}" th:selected="(${userShipping.userShippingStateProvince}==${province})"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-xs-4">
                                                <div class="form-group">
                                                    <label for="shippingZipcode">* Zip/Postal Code</label>
                                                    <input type="text" class="form-control" id="shippingZipcode"
                                                        placeholder="Shipping Zip/Postal Code"
                                                        th:name="userShippingZipPostalCode" required="required"
                                                        th:value="${userShipping.userShippingZipPostalCode}" />
                                                </div>
                                            </div>
                                        </div>
                                        <hr />
                                        <button type="submit" class="btn btn-primary btn-lg">Save All</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>
<!-- end of container -->



<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<div th:replace="common/header :: body-bottom-scripts"></div>

</body>

</html>